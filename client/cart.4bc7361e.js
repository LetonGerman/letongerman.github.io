import{K as t,I as s,L as e,M as a,J as n,H as r,S as o,i as l,s as c,N as i,e as f,l as u,a as d,b as h,f as p,d as v,c as m,h as g,j as b,k as E,O as $,C as w,D as y,t as x,g as k,x as q,m as I,P as D,Q as M,R as C,T as V,r as A,U as j,V as P,W as L,X as H,Y as B,E as S,Z as N,_ as O,o as X,F as Y,$ as _,G as T,a0 as R,a1 as F,A as G,z as W,n as z}from"./client.3e05f236.js";import{c as J,e as K,q as Q,a as U}from"./index.d419289e.js";function Z(t){return"[object Date]"===Object.prototype.toString.call(t)}function tt(t,s,e,a){if("number"==typeof e||Z(e)){const n=a-e,r=(e-s)/(t.dt||1/60),o=(r+(t.opts.stiffness*n-t.opts.damping*r)*t.inv_mass)*t.dt;return Math.abs(o)<t.opts.precision&&Math.abs(n)<t.opts.precision?a:(t.settled=!1,Z(e)?new Date(e.getTime()+o):e+o)}if(Array.isArray(e))return e.map(((n,r)=>tt(t,s[r],e[r],a[r])));if("object"==typeof e){const n={};for(const r in e)n[r]=tt(t,s[r],e[r],a[r]);return n}throw new Error(`Cannot spring ${typeof e} values`)}function st(s,n={}){const r=t(s),{stiffness:o=.15,damping:l=.8,precision:c=.01}=n;let i,f,u,d=s,h=s,p=1,v=0,m=!1;function g(t,n={}){h=t;const o=u={};if(null==s||n.hard||b.stiffness>=1&&b.damping>=1)return m=!0,i=e(),d=t,r.set(s=h),Promise.resolve();if(n.soft){const t=!0===n.soft?.5:+n.soft;v=1/(60*t),p=0}return f||(i=e(),m=!1,f=a((t=>{if(m)return m=!1,f=null,!1;p=Math.min(p+v,1);const e={inv_mass:p,opts:b,settled:!0,dt:60*(t-i)/1e3},a=tt(e,d,s,h);return i=t,d=s,r.set(s=a),e.settled&&(f=null),!e.settled}))),new Promise((t=>{f.promise.then((()=>{o===u&&t()}))}))}const b={set:g,update:(t,e)=>g(t(h,s),e),subscribe:r.subscribe,stiffness:o,damping:l,precision:c};return b}function et(t,s){if(t===s||t!=t)return()=>t;const e=typeof t;if(e!==typeof s||Array.isArray(t)!==Array.isArray(s))throw new Error("Cannot interpolate values of different type");if(Array.isArray(t)){const e=s.map(((s,e)=>et(t[e],s)));return t=>e.map((s=>s(t)))}if("object"===e){if(!t||!s)throw new Error("Object cannot be null");if(Z(t)&&Z(s)){t=t.getTime();const e=(s=s.getTime())-t;return s=>new Date(t+s*e)}const e=Object.keys(s),a={};return e.forEach((e=>{a[e]=et(t[e],s[e])})),t=>{const s={};return e.forEach((e=>{s[e]=a[e](t)})),s}}if("number"===e){const e=s-t;return s=>t+s*e}throw new Error(`Cannot interpolate ${e} values`)}let at;function nt(t,s){let e,a,n,r=0,o=0;const l=st({x:r,y:o},{stiffness:.2,damping:.4});function c(s){s.preventDefault(),e=s.clientX,a=s.clientY,n||(n=t.getBoundingClientRect()),t.classList.add("dragged"),t.dispatchEvent(new CustomEvent("dragstart",{detail:{lastX:e,lastY:a}})),window.addEventListener("mousemove",i),window.addEventListener("mouseup",f)}function i(n){const c=n.clientX-e,i=n.clientY-a;r+=c,o+=i,e=n.clientX,a=n.clientY;const f=t.getBoundingClientRect(),u=f.x+f.width/2,d=f.y+f.height/2;at&&at.classList.remove("droptarget"),at=null;const h=document.elementFromPoint(u,d);s.targets.map((t=>{h.closest(t)&&(at=h)})),at&&at.classList.add("droptarget"),l.set({x:r+c,y:o}),t.dispatchEvent(new CustomEvent("drag",{detail:{lastX:e,lastY:a,dx:c,dy:i}}))}function f(n){at?(at.classList.remove("droptarget"),console.log(at),r=0,o=0):(r=0,o=0),t.classList.remove("dragged"),e=n.clientX,a=n.clientY,l.set({x:r,y:o}),t.dispatchEvent(new CustomEvent("dragend",{detail:{dropTarget:at,lastX:e,lastY:a}})),at&&at.dispatchEvent(new CustomEvent("dropped",{detail:s.data,bubbles:!0})),at=null,window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",f)}return l.subscribe((s=>{t.style.left=s.x+"px",t.style.top=s.y+"px"})),t.addEventListener("mousedown",c),{destroy(){t.removeEventListener("mousedown",c)}}}function rt(t,s,e={}){const a=getComputedStyle(t),n="none"===a.transform?"":a.transform,o=s.from.width/t.clientWidth,l=s.from.height/t.clientHeight,c=(s.from.left-s.to.left)/o,i=(s.from.top-s.to.top)/l,f=Math.sqrt(c*c+i*i),{delay:u=0,duration:d=(t=>120*Math.sqrt(t)),easing:h=U}=e;return{delay:u,duration:r(d)?d(f):d,easing:h,css:(t,s)=>`transform: ${n} translate(${s*c}px, ${s*i}px);`}}function ot(t){let s,e,a,n,r,o,l,c;const I=t[4].default,D=i(I,t,t[3],null),M=D||function(t){let s,e;return{c(){s=f("span"),e=x(t[0]),this.h()},l(a){s=h(a,"SPAN",{class:!0});var n=p(s);e=k(n,t[0]),n.forEach(v),this.h()},h(){g(s,"class","svelte-s90gtf")},m(t,a){b(t,s,a),E(s,e)},p(t,s){1&s&&q(e,t[0])},d(t){t&&v(s)}}}(t);return{c(){s=f("div"),e=u("svg"),a=u("path"),n=u("path"),o=d(),l=f("div"),M&&M.c(),this.h()},l(t){s=h(t,"DIV",{class:!0});var r=p(s);e=h(r,"svg",{viewBox:!0,class:!0},1);var c=p(e);a=h(c,"path",{d:!0,class:!0},1),p(a).forEach(v),n=h(c,"path",{d:!0,class:!0},1),p(n).forEach(v),c.forEach(v),o=m(r),l=h(r,"DIV",{class:!0});var i=p(l);M&&M.l(i),i.forEach(v),r.forEach(v),this.h()},h(){g(a,"d","M50,5A45 45 0 1 1 49.9999 5"),g(a,"class","svelte-s90gtf"),g(n,"d",r=t[1]()),g(n,"class","svelte-s90gtf"),g(e,"viewBox","0 0 100 100"),g(e,"class","svelte-s90gtf"),g(l,"class","svelte-s90gtf"),g(s,"class","svelte-s90gtf")},m(t,r){b(t,s,r),E(s,e),E(e,a),E(e,n),E(s,o),E(s,l),M&&M.m(l,null),c=!0},p(t,[s]){(!c||2&s&&r!==(r=t[1]()))&&g(n,"d",r),D?D.p&&8&s&&$(D,I,t,t[3],s,null,null):M&&M.p&&1&s&&M.p(t,s)},i(t){c||(w(M,t),c=!0)},o(t){y(M,t),c=!1},d(t){t&&v(s),M&&M.d(t)}}}function lt(t,s,e){let a,{$$slots:n={},$$scope:r}=s,{value:o=0}=s,{max:l=100}=s;return t.$$set=t=>{"value"in t&&e(0,o=t.value),"max"in t&&e(2,l=t.max),"$$scope"in t&&e(3,r=t.$$scope)},t.$$.update=()=>{5&t.$$.dirty&&e(1,a=()=>{if(o<=0)return"";if(o>=l)return"M50,5A45 45 0 1 1 49.9999 5";{const t=2*Math.PI*(o/l),s=50+45*Math.cos(t-Math.PI/2),e=50+45*Math.sin(t-Math.PI/2);let a="M50,5";return t>Math.PI&&(a+="A45 45 0 0 1 50 95"),a+=`A45 45 0 0 1 ${s} ${e}`,a}})},[o,a,l,r,n]}J({duration:t=>600,easing:K,fallback(t,s){const e=getComputedStyle(t),a="none"===e.transform?"":e.transform;return{duration:600,easing:Q,css:t=>`\n        transform: ${a} scale(${t});\n        opacity: ${t}\n      `}}});class ct extends o{constructor(t){super(),l(this,t,lt,ot,c,{value:0,max:2})}}function it(t,s,e){const a=t.slice();return a[15]=s[e],a[17]=e,a}function ft(t,s,e){const a=t.slice();return a[18]=s[e],a[20]=e,a}function ut(t){let s,e,a,n,r,o,l,c;return{c(){s=f("div"),e=f("span"),a=x("$"),n=x(t[3]),r=d(),o=f("span"),l=x("$"),c=x(gt),this.h()},l(i){s=h(i,"DIV",{class:!0});var f=p(s);e=h(f,"SPAN",{class:!0});var u=p(e);a=k(u,"$"),n=k(u,t[3]),u.forEach(v),r=m(f),o=h(f,"SPAN",{});var d=p(o);l=k(d,"$"),c=k(d,gt),d.forEach(v),f.forEach(v),this.h()},h(){g(e,"class","border-b border-black"),g(s,"class","flex flex-col budget_counter svelte-b9a8q1")},m(t,i){b(t,s,i),E(s,e),E(e,a),E(e,n),E(s,r),E(s,o),E(o,l),E(o,c)},p(t,s){8&s&&q(n,t[3])},d(t){t&&v(s)}}}function dt(t){let s,e=t[0],a=[];for(let s=0;s<e.length;s+=1)a[s]=pt(ft(t,e,s));return{c(){for(let t=0;t<a.length;t+=1)a[t].c();s=G()},l(t){for(let s=0;s<a.length;s+=1)a[s].l(t);s=G()},m(t,e){for(let s=0;s<a.length;s+=1)a[s].m(t,e);b(t,s,e)},p(t,n){if(1&n){let r;for(e=t[0],r=0;r<e.length;r+=1){const o=ft(t,e,r);a[r]?a[r].p(o,n):(a[r]=pt(o),a[r].c(),a[r].m(s.parentNode,s))}for(;r<a.length;r+=1)a[r].d(1);a.length=e.length}},d(t){W(a,t),t&&v(s)}}}function ht(t){let s;return{c(){s=f("div")},l(t){s=h(t,"DIV",{}),p(s).forEach(v)},m(t,e){b(t,s,e)},p:z,d(t){t&&v(s)}}}function pt(t){let s,e,a,n,o,l,c,i,u,$,w,y=t[18].name+"",I=t[18].price+"";return{c(){s=f("div"),e=f("h2"),a=x(y),n=d(),o=f("h3"),l=x("$"),c=x(I),i=d(),this.h()},l(t){s=h(t,"DIV",{class:!0});var r=p(s);e=h(r,"H2",{class:!0});var f=p(e);a=k(f,y),f.forEach(v),n=m(r),o=h(r,"H3",{class:!0});var u=p(o);l=k(u,"$"),c=k(u,I),u.forEach(v),i=m(r),r.forEach(v),this.h()},h(){g(e,"class","svelte-b9a8q1"),g(o,"class","svelte-b9a8q1"),g(s,"class","pro svelte-b9a8q1")},m(r,f){b(r,s,f),E(s,e),E(e,a),E(s,n),E(s,o),E(o,l),E(o,c),E(s,i),$||(w=F(u=nt.call(null,s,{data:t[18],targets:[".cart"]})),$=!0)},p(s,e){t=s,1&e&&y!==(y=t[18].name+"")&&q(a,y),1&e&&I!==(I=t[18].price+"")&&q(c,I),u&&r(u.update)&&1&e&&u.update.call(null,{data:t[18],targets:[".cart"]})},d(t){t&&v(s),$=!1,w()}}}function vt(t,s){let e,a,n,o,l,c,i,$,w,y,j,P,L,H,B,S,N,O,X,T,R,F,G,W,J,K,Q,U,Z=s[15].name+"",tt=s[15].amount+"",st=s[15].price*s[15].amount+"",et=z;return{key:t,first:null,c(){e=f("div"),a=f("img"),o=d(),l=f("h2"),c=x(Z),i=d(),$=f("div"),w=u("svg"),y=u("path"),j=d(),P=f("div"),L=f("h3"),H=x(tt),B=d(),S=f("h3"),N=x("$"),O=x(st),X=d(),T=u("svg"),R=u("path"),F=d(),this.h()},l(t){e=h(t,"DIV",{class:!0});var s=p(e);a=h(s,"IMG",{src:!0,class:!0}),o=m(s),l=h(s,"H2",{class:!0});var n=p(l);c=k(n,Z),n.forEach(v),i=m(s),$=h(s,"DIV",{class:!0});var r=p($);w=h(r,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var f=p(w);y=h(f,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),p(y).forEach(v),f.forEach(v),j=m(r),P=h(r,"DIV",{class:!0});var u=p(P);L=h(u,"H3",{class:!0});var d=p(L);H=k(d,tt),d.forEach(v),B=m(u),S=h(u,"H3",{class:!0});var g=p(S);N=k(g,"$"),O=k(g,st),g.forEach(v),u.forEach(v),X=m(r),T=h(r,"svg",{xmlns:!0,class:!0,fill:!0,viewBox:!0,stroke:!0},1);var b=p(T);R=h(b,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-width":!0,d:!0},1),p(R).forEach(v),b.forEach(v),r.forEach(v),F=m(s),s.forEach(v),this.h()},h(){a.src!==(n=s[15].name+".png")&&g(a,"src",n),g(a,"class","svelte-b9a8q1"),g(l,"class","ml-2 svelte-b9a8q1"),g(y,"stroke-linecap","round"),g(y,"stroke-linejoin","round"),g(y,"stroke-width","2"),g(y,"d","M18 12H6"),g(w,"xmlns","http://www.w3.org/2000/svg"),g(w,"class","h-7 w-7 controls_button svelte-b9a8q1"),g(w,"fill","none"),g(w,"viewBox","0 0 24 24"),g(w,"stroke","currentColor"),g(L,"class","svelte-b9a8q1"),g(S,"class","svelte-b9a8q1"),g(P,"class","details items-center svelte-b9a8q1"),g(R,"stroke-linecap","round"),g(R,"stroke-linejoin","round"),g(R,"stroke-width","2"),g(R,"d","M12 6v6m0 0v6m0-6h6m-6 0H6"),g(T,"xmlns","http://www.w3.org/2000/svg"),g(T,"class","h-7 w-7 controls_button svelte-b9a8q1"),g(T,"fill","none"),g(T,"viewBox","0 0 24 24"),g(T,"stroke","currentColor"),g($,"class","controls svelte-b9a8q1"),g(e,"class","item svelte-b9a8q1"),this.first=e},m(t,n){b(t,e,n),E(e,a),E(e,o),E(e,l),E(l,c),E(e,i),E(e,$),E($,w),E(w,y),E($,j),E($,P),E(P,L),E(L,H),E(P,B),E(P,S),E(S,N),E(S,O),E($,X),E($,T),E(T,R),E(e,F),K=!0,Q||(U=[I(w,"click",(function(){r(s[8](s[17]))&&s[8](s[17]).apply(this,arguments)})),I(T,"click",(function(){r(s[7](s[17]))&&s[7](s[17]).apply(this,arguments)}))],Q=!0)},p(t,e){s=t,(!K||4&e&&a.src!==(n=s[15].name+".png"))&&g(a,"src",n),(!K||4&e)&&Z!==(Z=s[15].name+"")&&q(c,Z),(!K||4&e)&&tt!==(tt=s[15].amount+"")&&q(H,tt),(!K||4&e)&&st!==(st=s[15].price*s[15].amount+"")&&q(O,st)},r(){J=e.getBoundingClientRect()},f(){D(e),et(),M(e,J)},a(){et(),et=C(e,J,rt,{})},i(t){K||(t&&Y((()=>{W&&W.end(1),G||(G=_(e,s[10],s[15].id)),G.start()})),K=!0)},o(t){G&&G.invalidate(),t&&(W=V(e,s[9],s[15].id)),K=!1},d(t){t&&v(e),t&&W&&W.end(),Q=!1,A(U)}}}function mt(t){let s,e,a,n,r,o,l,c,i,u,$,q,D,M,C,V,A,O,X,Y,_,F,G,W,z=[],J=new Map;function K(t,s){return t[1]?dt:ht}r=new ct({props:{max:gt,value:t[4],$$slots:{default:[ut]},$$scope:{ctx:t}}});let Q=K(t),U=Q(t),Z=t[2];const tt=t=>t[15];for(let s=0;s<Z.length;s+=1){let e=it(t,Z,s),a=tt(e);J.set(a,z[s]=vt(a,e))}return{c(){s=f("main"),e=f("section"),a=f("div"),n=f("div"),j(r.$$.fragment),l=d(),c=f("div"),U.c(),u=d(),$=f("div"),q=f("div"),D=f("h1"),M=x("Cart"),C=d(),V=f("div"),A=f("div");for(let t=0;t<z.length;t+=1)z[t].c();O=d(),X=f("div"),Y=d(),_=f("div"),this.h()},l(t){s=h(t,"MAIN",{class:!0});var o=p(s);e=h(o,"SECTION",{class:!0});var i=p(e);a=h(i,"DIV",{class:!0});var f=p(a);n=h(f,"DIV",{class:!0});var d=p(n);P(r.$$.fragment,d),d.forEach(v),l=m(f),c=h(f,"DIV",{class:!0});var g=p(c);U.l(g),g.forEach(v),f.forEach(v),u=m(i),$=h(i,"DIV",{class:!0});var b=p($);q=h(b,"DIV",{class:!0});var E=p(q);D=h(E,"H1",{class:!0});var w=p(D);M=k(w,"Cart"),w.forEach(v),E.forEach(v),C=m(b),V=h(b,"DIV",{class:!0});var y=p(V);A=h(y,"DIV",{class:!0});var x=p(A);for(let t=0;t<z.length;t+=1)z[t].l(x);x.forEach(v),y.forEach(v),b.forEach(v),i.forEach(v),o.forEach(v),O=m(t),X=h(t,"DIV",{class:!0}),p(X).forEach(v),Y=m(t),_=h(t,"DIV",{class:!0}),p(_).forEach(v),this.h()},h(){g(n,"class",o=L("budget grid transition-opacity "+(t[1]?"opacity-1":"opacity-0"))+" svelte-b9a8q1"),g(c,"class",i=L(t[1]?"links":"links h-1/2")+" svelte-b9a8q1"),g(a,"class","dashboard svelte-b9a8q1"),g(D,"class","svelte-b9a8q1"),g(q,"class","status"),g(A,"class","cart svelte-b9a8q1"),g(V,"class","cards svelte-b9a8q1"),g($,"class","games svelte-b9a8q1"),g(e,"class","glass svelte-b9a8q1"),g(s,"class","svelte-b9a8q1"),g(X,"class","circle1 svelte-b9a8q1"),g(_,"class","circle2 svelte-b9a8q1")},m(o,i){b(o,s,i),E(s,e),E(e,a),E(a,n),H(r,n,null),E(a,l),E(a,c),U.m(c,null),E(e,u),E(e,$),E($,q),E(q,D),E(D,M),E($,C),E($,V),E(V,A);for(let t=0;t<z.length;t+=1)z[t].m(A,null);b(o,O,i),b(o,X,i),b(o,Y,i),b(o,_,i),F=!0,G||(W=I(A,"dropped",t[11]),G=!0)},p(t,[s]){const e={};if(16&s&&(e.value=t[4]),2097160&s&&(e.$$scope={dirty:s,ctx:t}),r.$set(e),(!F||2&s&&o!==(o=L("budget grid transition-opacity "+(t[1]?"opacity-1":"opacity-0"))+" svelte-b9a8q1"))&&g(n,"class",o),Q===(Q=K(t))&&U?U.p(t,s):(U.d(1),U=Q(t),U&&(U.c(),U.m(c,null))),(!F||2&s&&i!==(i=L(t[1]?"links":"links h-1/2")+" svelte-b9a8q1"))&&g(c,"class",i),388&s){Z=t[2],T();for(let t=0;t<z.length;t+=1)z[t].r();z=B(z,s,tt,1,t,Z,J,A,R,vt,null,it);for(let t=0;t<z.length;t+=1)z[t].a();S()}},i(t){if(!F){w(r.$$.fragment,t);for(let t=0;t<Z.length;t+=1)w(z[t]);F=!0}},o(t){y(r.$$.fragment,t);for(let t=0;t<z.length;t+=1)y(z[t]);F=!1},d(t){t&&v(s),N(r),U.d();for(let t=0;t<z.length;t+=1)z[t].d();t&&v(O),t&&v(X),t&&v(Y),t&&v(_),G=!1,W()}}}let gt=600;function bt(r,o,l){let c;const i=[];let f=!1,u=[],d=0,h=function(r,o={}){const l=t(r);let c,i=r;function f(t,f){if(null==r)return l.set(r=t),Promise.resolve();i=t;let u=c,d=!1,{delay:h=0,duration:p=400,easing:v=n,interpolate:m=et}=s(s({},o),f);if(0===p)return u&&(u.abort(),u=null),l.set(r=i),Promise.resolve();const g=e()+h;let b;return c=a((s=>{if(s<g)return!0;d||(b=m(r,t),"function"==typeof p&&(p=p(r,t)),d=!0),u&&(u.abort(),u=null);const e=s-g;return e>p?(l.set(r=t),!1):(l.set(r=b(v(e/p))),!0)})),c.promise}return{set:f,update:(t,s)=>f(t(i,r),s),subscribe:l.subscribe}}(0,{duration:500,easing:U});function p(t){v(t.price)&&(-1!==u.indexOf(t)?l(2,u[u.indexOf(t)].amount++,u):u.push(t),l(2,u))}function v(t){return console.log(t),c+t>gt?(alert("Не хватает деняк!"),!1):(l(3,d+=t),h.set(d),!0)}O(r,h,(t=>l(4,c=t))),X((async()=>{fetch("https://kodaktor.ru/cart_data.json").then((t=>t.json())).then((t=>{let s=1;for(let e of Object.keys(t))i.push({id:s,name:e,price:Number(t[e]),amount:1}),s++;l(1,f=!0)}))}));const[m,g]=J({duration:t=>600,easing:K,fallback(t,s){const e=getComputedStyle(t),a="none"===e.transform?"":e.transform;return{duration:600,easing:Q,css:t=>`\n        transform: ${a} scale(${t});\n        opacity: ${t}\n      `}}});return[i,f,u,d,c,h,p,function(t){v(u[t].price)&&(l(2,u[t].amount++,u),l(2,u))},function(t){v(-u[t].price),u[t].amount-1>0?l(2,u[t].amount--,u):u.splice(t,1),l(2,u)},m,g,t=>p(t.detail)]}export default class extends o{constructor(t){super(),l(this,t,bt,mt,c,{})}}
